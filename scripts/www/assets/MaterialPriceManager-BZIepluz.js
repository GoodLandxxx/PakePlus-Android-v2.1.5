import{d as b,u as g,i as S,h as M,j as x,c as i,a as C,b as t,A as I,l as N,F as m,r as v,f as p,B as V,e as B,v as _,o as l,t as c,_ as L}from"./index-C-yXZlVN.js";import{u as T}from"./densityStore-BtvzsIEE.js";const U={class:"page-container"},A={class:"content"},D={class:"specs-list"},E={class:"spec-info"},F={class:"spec-main"},O={class:"spec-sub"},J=["onClick"],P={key:0,class:"empty-tip"},j={class:"add-card"},G={class:"input-row"},H={class:"input-wrapper",style:{flex:"2"}},K=["value"],R={class:"input-row"},Y={class:"input-wrapper"},$={class:"input-wrapper"},h="machining_material_prices",q=b({__name:"MaterialPriceManager",setup(z){const f=T(),d=g(),a=S([]),n=M({name:"",thickness:"",price:""}),k=()=>{const o=localStorage.getItem(h);if(o)try{a.value=JSON.parse(o)}catch(e){console.error("Failed to parse price list",e)}},u=()=>{localStorage.setItem(h,JSON.stringify(a.value))},w=()=>{const o=n.name.trim(),e=n.thickness.trim(),s=Number(n.price);if(!o||!e||!s){d.showModal({title:"错误",content:"请完整填写材质名称、厚度和价格",type:"warning"});return}a.value.push({name:o,thickness:e,price:s}),u(),n.name="",n.thickness="",n.price=""},y=o=>{d.showModal({title:"确认删除",content:"确定要删除这个材质吗？",type:"warning",showCancel:!0,confirmText:"删除",cancelText:"取消",onConfirm:()=>{a.value.splice(o,1),u(),d.showModal({type:"success",content:"删除成功"})}})};return x(()=>{k()}),(o,e)=>(l(),i("div",U,[C(I,{title:"常用材质/价格","show-arrow":""}),t("div",A,[t("div",D,[(l(!0),i(m,null,v(a.value,(s,r)=>(l(),i("div",{key:r,class:"spec-item"},[t("div",E,[t("div",F,c(s.name),1),t("div",O,"厚度: "+c(s.thickness)+"mm | 价格: "+c(s.price),1)]),t("button",{class:"delete-btn",onClick:Q=>y(r)},"删除",8,J)]))),128)),a.value.length===0?(l(),i("div",P," 暂无常用材质价格，请添加 ")):N("",!0)]),t("div",j,[e[7]||(e[7]=t("div",{class:"add-title"},"添加新材质",-1)),t("div",G,[t("div",H,[e[4]||(e[4]=t("label",null,"材质名称",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s),class:"material-select"},[e[3]||(e[3]=t("option",{value:"",disabled:""},"请选择材质",-1)),(l(!0),i(m,null,v(B(f).densities,(s,r)=>(l(),i("option",{key:r,value:s.name},c(s.name),9,K))),128))],512),[[V,n.name]])])]),t("div",R,[t("div",Y,[e[5]||(e[5]=t("label",null,"厚度(mm)",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.thickness=s),type:"text",placeholder:"如: 8 或 3-20"},null,512),[[_,n.thickness]])]),t("div",$,[e[6]||(e[6]=t("label",null,"单价",-1)),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.price=s),type:"number",placeholder:"0"},null,512),[[_,n.price,void 0,{number:!0}]])])]),t("button",{class:"add-confirm-btn",onClick:w},"添加")])])]))}}),Z=L(q,[["__scopeId","data-v-707e43c1"]]);export{Z as default};
