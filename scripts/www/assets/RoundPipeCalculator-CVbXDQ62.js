import{d as S,u as U,h as _,i as g,j as $,p as k,c as F,a as n,b as a,A as M,w as u,q as T,o as I,f as p,v as m,g as b,_ as N}from"./index-C-yXZlVN.js";import{F as s}from"./FormRow-DdkG5DgU.js";import{S as P}from"./SelectDensity-DBYkwQsh.js";import{P as w}from"./PrimaryButton-CbN-5kpj.js";import"./densityStore-BtvzsIEE.js";const R={class:"calculator-page"},B={class:"content"},L={class:"form-card"},O=["value"],j=["value"],A={class:"actions"},H=S({__name:"RoundPipeCalculator",setup(J){const h=U(),e=_({outerD:0,innerD:0,length:1e3,density:.93,price:10,count:1}),r=_({weight:"0.00",amount:"0.00"}),i=g([]),x=()=>{if(!e.outerD||!e.length||!e.density){h.showModal({title:"错误",content:"请填写外径、长度和密度",type:"warning"});return}const o=e.outerD,t=e.innerD||0,d=e.length,f=(Math.PI*(Math.pow(o,2)-Math.pow(t,2))/4*d*e.density/1e6*e.count).toFixed(2),v=(parseFloat(f)*e.price).toFixed(2);r.weight=f,r.amount=v;const C=t>0?`Φ${o}x${t}x${d}mm`:`Φ${o}x${d}mm`;i.value.unshift({spec:`${C} (${e.count}件)`,density:e.density,weight:f,price:e.price,amount:v,_raw:{...e}})},D=o=>{o._raw&&(Object.assign(e,o._raw),r.weight=o.weight,r.amount=o.amount)},c=g(0);let y=null;const V=()=>{e.outerD=0,e.innerD=0,e.length=1e3,e.density=.93,e.price=0,e.count=1,r.weight="0.00",r.amount="0.00",c.value++,y&&clearTimeout(y),y=setTimeout(()=>{c.value=0},1e3),c.value>=3&&(i.value=[],c.value=0)};return $(()=>{const o=localStorage.getItem("history_round_pipe");if(o)try{i.value=JSON.parse(o)}catch(t){console.error("Failed to load history",t)}}),k(i,o=>{localStorage.setItem("history_round_pipe",JSON.stringify(o))},{deep:!0}),(o,t)=>{const d=T("ResultList");return I(),F("div",R,[n(M,{title:"圆管/圆棒","show-arrow":""}),a("div",B,[a("div",L,[n(s,{label:"外 径：",unit:"mm"},{default:u(()=>[p(a("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.outerD=l),type:"number"},null,512),[[m,e.outerD,void 0,{number:!0}]])]),_:1}),n(s,{label:"内 径：",unit:"mm"},{default:u(()=>[p(a("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>e.innerD=l),type:"number",placeholder:"圆棒不用填"},null,512),[[m,e.innerD,void 0,{number:!0}]])]),_:1}),n(s,{label:"长 度：",unit:"mm"},{default:u(()=>[p(a("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.length=l),type:"number"},null,512),[[m,e.length,void 0,{number:!0}]])]),_:1}),n(s,{label:"密 度：",unit:"g/cm³"},{default:u(()=>[n(P,{modelValue:e.density,"onUpdate:modelValue":t[3]||(t[3]=l=>e.density=l)},null,8,["modelValue"])]),_:1}),n(s,{label:"单 价：",unit:"元/千克"},{default:u(()=>[p(a("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>e.price=l),type:"number"},null,512),[[m,e.price,void 0,{number:!0}]])]),_:1}),n(s,{label:"数 量：",unit:"件"},{default:u(()=>[p(a("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>e.count=l),type:"number"},null,512),[[m,e.count,void 0,{number:!0}]])]),_:1}),n(s,{label:"重 量：",unit:"kg"},{default:u(()=>[a("input",{value:r.weight,type:"text",readonly:"",class:"readonly-input"},null,8,O)]),_:1}),n(s,{label:"金 额：",unit:"元"},{default:u(()=>[a("input",{value:r.amount,type:"text",readonly:"",class:"readonly-input"},null,8,j)]),_:1})]),n(d,{items:i.value,onSelect:D},null,8,["items"]),a("div",A,[n(w,{type:"secondary",onClick:V},{default:u(()=>[...t[6]||(t[6]=[b("清空",-1)])]),_:1}),n(w,{type:"primary",onClick:x},{default:u(()=>[...t[7]||(t[7]=[b("计算",-1)])]),_:1})])])])}}}),W=N(H,[["__scopeId","data-v-166b18f6"]]);export{W as default};
