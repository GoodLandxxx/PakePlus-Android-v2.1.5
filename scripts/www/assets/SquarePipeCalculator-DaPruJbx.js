import{d as M,u as N,h as g,i as v,j as T,p as $,c as q,a,b as l,A,w as i,o as B,f as r,v as d,g as w,_ as H}from"./index-C-yXZlVN.js";import{F as s}from"./FormRow-DdkG5DgU.js";import{S as I}from"./SelectDensity-DBYkwQsh.js";import{P as _}from"./PrimaryButton-CbN-5kpj.js";import{R as P}from"./ResultList-CBmffLVs.js";import"./densityStore-BtvzsIEE.js";const O={class:"calculator-page"},R={class:"content"},j={class:"form-card"},D=["value"],J=["value"],L={class:"actions"},W=M({__name:"SquarePipeCalculator",setup(E){const b=N(),e=g({width:100,height:50,thickness:5,length:1e3,density:.93,price:10,count:1}),u=g({weight:"0.00",amount:"0.00"}),m=v([]),x=()=>{if(!e.width||!e.height||!e.length||!e.density){b.showModal({title:"错误",content:"请填写完整尺寸和密度",type:"warning"});return}const o=e.width,t=e.height,n=e.thickness||0,y=e.length,S=o*t,C=Math.max(0,o-2*n),U=Math.max(0,t-2*n),F=C*U,h=((S-F)*y*e.density/1e6*e.count).toFixed(2),f=(parseFloat(h)*e.price).toFixed(2);u.weight=h,u.amount=f,m.value.unshift({spec:`${o}x${t}x${n}x${y}mm (${e.count}件)`,density:e.density,weight:h,price:e.price,amount:f,_raw:{...e}})},V=o=>{o._raw&&(Object.assign(e,o._raw),u.weight=o.weight,u.amount=o.amount)},p=v(0);let c=null;const k=()=>{e.width=100,e.height=50,e.thickness=5,e.length=1e3,e.density=.93,e.price=0,e.count=1,u.weight="0.00",u.amount="0.00",p.value++,c&&clearTimeout(c),c=setTimeout(()=>{p.value=0},1e3),p.value>=3&&(m.value=[],p.value=0)};return T(()=>{const o=localStorage.getItem("history_square_pipe");if(o)try{m.value=JSON.parse(o)}catch(t){console.error("Failed to load history",t)}}),$(m,o=>{localStorage.setItem("history_square_pipe",JSON.stringify(o))},{deep:!0}),(o,t)=>(B(),q("div",O,[a(A,{title:"方管/扁管","show-arrow":""}),l("div",R,[l("div",j,[a(s,{label:"宽 度：",unit:"mm"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.width=n),type:"number"},null,512),[[d,e.width,void 0,{number:!0}]])]),_:1}),a(s,{label:"高 度：",unit:"mm"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.height=n),type:"number"},null,512),[[d,e.height,void 0,{number:!0}]])]),_:1}),a(s,{label:"壁 厚：",unit:"mm"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e.thickness=n),type:"number"},null,512),[[d,e.thickness,void 0,{number:!0}]])]),_:1}),a(s,{label:"长 度：",unit:"mm"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>e.length=n),type:"number"},null,512),[[d,e.length,void 0,{number:!0}]])]),_:1}),a(s,{label:"密 度：",unit:"g/cm³"},{default:i(()=>[a(I,{modelValue:e.density,"onUpdate:modelValue":t[4]||(t[4]=n=>e.density=n)},null,8,["modelValue"])]),_:1}),a(s,{label:"单 价：",unit:"元/千克"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>e.price=n),type:"number"},null,512),[[d,e.price,void 0,{number:!0}]])]),_:1}),a(s,{label:"数 量：",unit:"件"},{default:i(()=>[r(l("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>e.count=n),type:"number"},null,512),[[d,e.count,void 0,{number:!0}]])]),_:1}),a(s,{label:"重 量：",unit:"kg"},{default:i(()=>[l("input",{value:u.weight,type:"text",readonly:"",class:"readonly-input"},null,8,D)]),_:1}),a(s,{label:"金 额：",unit:"元"},{default:i(()=>[l("input",{value:u.amount,type:"text",readonly:"",class:"readonly-input"},null,8,J)]),_:1})]),a(P,{items:m.value,onSelect:V},null,8,["items"]),l("div",L,[a(_,{type:"secondary",onClick:k},{default:i(()=>[...t[7]||(t[7]=[w("清空",-1)])]),_:1}),a(_,{type:"primary",onClick:x},{default:i(()=>[...t[8]||(t[8]=[w("计算",-1)])]),_:1})])])]))}}),ee=H(W,[["__scopeId","data-v-c88d49e3"]]);export{ee as default};
