import{d as x,u as V,h as w,i as f,j as S,p as C,c as U,a as l,b as a,A as F,w as s,o as N,f as r,v as d,g,_ as T}from"./index-C-yXZlVN.js";import{F as u}from"./FormRow-DdkG5DgU.js";import{S as A}from"./SelectDensity-DBYkwQsh.js";import{P as v}from"./PrimaryButton-CbN-5kpj.js";import{R as B}from"./ResultList-CBmffLVs.js";import"./densityStore-BtvzsIEE.js";const I={class:"calculator-page"},$={class:"content"},L={class:"form-card"},M=["value"],O=["value"],R={class:"actions"},j=x({__name:"AngleCalculator",setup(D){const h=V(),e=w({w1:50,w2:50,thickness:5,length:1e3,density:.93,price:10,count:1}),i=w({weight:"0.00",amount:"0.00"}),m=f([]),b=()=>{if(!e.w1||!e.thickness||!e.length||!e.density){h.showModal({title:"错误",content:"请填写完整尺寸和密度",type:"warning"});return}const o=e.w2||e.w1,n=((e.w1*e.thickness+o*e.thickness-e.thickness*e.thickness)*e.length*e.density/1e6*e.count).toFixed(2),y=(parseFloat(n)*e.price).toFixed(2);i.weight=n,i.amount=y,m.value.unshift({spec:`L ${e.w1}x${o}x${e.thickness}x${e.length}mm`,density:e.density,weight:n,price:e.price,amount:y,_raw:{...e}})},_=o=>{o._raw&&(Object.assign(e,o._raw),i.weight=o.weight,i.amount=o.amount)},p=f(0);let c=null;const k=()=>{e.w1=50,e.w2=50,e.thickness=5,e.length=1e3,e.density=.93,e.price=0,e.count=1,i.weight="0.00",i.amount="0.00",p.value++,c&&clearTimeout(c),c=setTimeout(()=>{p.value=0},1e3),p.value>=3&&(m.value=[],p.value=0)};return S(()=>{const o=localStorage.getItem("history_angle");if(o)try{m.value=JSON.parse(o)}catch(t){console.error("Failed to load history",t)}}),C(m,o=>{localStorage.setItem("history_angle",JSON.stringify(o))},{deep:!0}),(o,t)=>(N(),U("div",I,[l(F,{title:"L 型材","show-arrow":""}),a("div",$,[a("div",L,[l(u,{label:"边宽1：",unit:"mm"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.w1=n),type:"number"},null,512),[[d,e.w1,void 0,{number:!0}]])]),_:1}),l(u,{label:"边宽2：",unit:"mm"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.w2=n),type:"number"},null,512),[[d,e.w2,void 0,{number:!0}]])]),_:1}),l(u,{label:"厚 度：",unit:"mm"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e.thickness=n),type:"number"},null,512),[[d,e.thickness,void 0,{number:!0}]])]),_:1}),l(u,{label:"长 度：",unit:"mm"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>e.length=n),type:"number"},null,512),[[d,e.length,void 0,{number:!0}]])]),_:1}),l(u,{label:"密 度：",unit:"g/cm³"},{default:s(()=>[l(A,{modelValue:e.density,"onUpdate:modelValue":t[4]||(t[4]=n=>e.density=n)},null,8,["modelValue"])]),_:1}),l(u,{label:"单 价：",unit:"元/千克"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>e.price=n),type:"number"},null,512),[[d,e.price,void 0,{number:!0}]])]),_:1}),l(u,{label:"数 量：",unit:"件"},{default:s(()=>[r(a("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>e.count=n),type:"number"},null,512),[[d,e.count,void 0,{number:!0}]])]),_:1}),l(u,{label:"重 量：",unit:"kg"},{default:s(()=>[a("input",{value:i.weight,type:"text",readonly:"",class:"readonly-input"},null,8,M)]),_:1}),l(u,{label:"金 额：",unit:"元"},{default:s(()=>[a("input",{value:i.amount,type:"text",readonly:"",class:"readonly-input"},null,8,O)]),_:1})]),l(B,{items:m.value,onSelect:_},null,8,["items"]),a("div",R,[l(v,{type:"secondary",onClick:k},{default:s(()=>[...t[7]||(t[7]=[g("清空",-1)])]),_:1}),l(v,{type:"primary",onClick:b},{default:s(()=>[...t[8]||(t[8]=[g("计算",-1)])]),_:1})])])]))}}),G=T(j,[["__scopeId","data-v-d339d1be"]]);export{G as default};
