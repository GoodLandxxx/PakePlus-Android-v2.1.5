import{d as V,u as S,h as y,i as _,j as C,p as k,c as B,a,b as n,A as F,w as s,o as U,f as c,v as p,g as v,_ as H}from"./index-C-yXZlVN.js";import{F as u}from"./FormRow-DdkG5DgU.js";import{S as M}from"./SelectDensity-DBYkwQsh.js";import{P as g}from"./PrimaryButton-CbN-5kpj.js";import{R as N}from"./ResultList-CBmffLVs.js";import"./densityStore-BtvzsIEE.js";const T={class:"calculator-page"},I={class:"content"},O={class:"form-card"},R=["value"],j=["value"],A={class:"actions"},D=V({__name:"HexBarCalculator",setup(J){const h=S(),e=y({s:20,length:1e3,density:.93,price:10,count:1}),r=y({weight:"0.00",amount:"0.00"}),i=_([]),b=()=>{if(!e.s||!e.length||!e.density){h.showModal({title:"错误",content:"请填写完整尺寸和密度",type:"warning"});return}const o=(Math.sqrt(3)/2*Math.pow(e.s,2)*e.length*e.density/1e6*e.count).toFixed(2),f=(parseFloat(o)*e.price).toFixed(2);r.weight=o,r.amount=f,i.value.unshift({spec:`Hex s=${e.s}x${e.length}mm`,density:e.density,weight:o,price:e.price,amount:f,_raw:{...e}})},w=l=>{l._raw&&(Object.assign(e,l._raw),r.weight=l.weight,r.amount=l.amount)},d=_(0);let m=null;const x=()=>{e.s=20,e.length=1e3,e.density=.93,e.price=0,e.count=1,r.weight="0.00",r.amount="0.00",d.value++,m&&clearTimeout(m),m=setTimeout(()=>{d.value=0},1e3),d.value>=3&&(i.value=[],d.value=0)};return C(()=>{const l=localStorage.getItem("history_hex_bar");if(l)try{i.value=JSON.parse(l)}catch(t){console.error("Failed to load history",t)}}),k(i,l=>{localStorage.setItem("history_hex_bar",JSON.stringify(l))},{deep:!0}),(l,t)=>(U(),B("div",T,[a(F,{title:"六角棒","show-arrow":""}),n("div",I,[n("div",O,[a(u,{label:"对边距：",unit:"mm"},{default:s(()=>[c(n("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.s=o),type:"number",placeholder:"s"},null,512),[[p,e.s,void 0,{number:!0}]])]),_:1}),a(u,{label:"长 度：",unit:"mm"},{default:s(()=>[c(n("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.length=o),type:"number"},null,512),[[p,e.length,void 0,{number:!0}]])]),_:1}),a(u,{label:"密 度：",unit:"g/cm³"},{default:s(()=>[a(M,{modelValue:e.density,"onUpdate:modelValue":t[2]||(t[2]=o=>e.density=o)},null,8,["modelValue"])]),_:1}),a(u,{label:"单 价：",unit:"元/千克"},{default:s(()=>[c(n("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.price=o),type:"number"},null,512),[[p,e.price,void 0,{number:!0}]])]),_:1}),a(u,{label:"数 量：",unit:"件"},{default:s(()=>[c(n("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>e.count=o),type:"number"},null,512),[[p,e.count,void 0,{number:!0}]])]),_:1}),a(u,{label:"重 量：",unit:"kg"},{default:s(()=>[n("input",{value:r.weight,type:"text",readonly:"",class:"readonly-input"},null,8,R)]),_:1}),a(u,{label:"金 额：",unit:"元"},{default:s(()=>[n("input",{value:r.amount,type:"text",readonly:"",class:"readonly-input"},null,8,j)]),_:1})]),a(N,{items:i.value,onSelect:w},null,8,["items"]),n("div",A,[a(g,{type:"secondary",onClick:x},{default:s(()=>[...t[5]||(t[5]=[v("清空",-1)])]),_:1}),a(g,{type:"primary",onClick:b},{default:s(()=>[...t[6]||(t[6]=[v("计算",-1)])]),_:1})])])]))}}),G=H(D,[["__scopeId","data-v-f7bc24a0"]]);export{G as default};
